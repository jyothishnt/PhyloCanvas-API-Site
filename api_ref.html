                <section id="api_ref">
                  <h1> API Reference </h1>
                  <hr>
                  <ul>
                    <li><a href="#api_classes">Classes</a></li>
                    <li>
                      <a href="#api_tree">Tree</a>
                      <ul class="circle">
                        <li><a href="#api_tree">Configuration</a></li>
                        <li><a href="#api_tree_functions">Functions</a></li>
                      </ul>
                    </li>
                    <li><a href="#api_branch">Branch</a>
                      <ul class="circle">
                        <li><a href="#api_branch">Properties</a></li>
                        <li><a href="#api_branch_functions">Functions</a></li>
                      </ul>
                    </li>
                    <li>
                      <a href="#api_events">Events</a>
                      <ul class="circle">
                        <li><a href="#api_events">Helper Methods</a></li>
                        <li><a href="#api_events1">Events</a></li>
                      </ul>
                    </li>
                    <li><a href="#api_history">History</a>
                      <ul class="circle">
                        <li><a href="#api_history">Properties</a></li>
                        <li><a href="#api_history_functions">Functions</a></li>
                      </ul>
                    </li>
                    <li><a href="#api_contextmenu">ContextMenu</a>
                      <ul class="circle">
                        <li><a href="#api_contextmenu">Properties</a></li>
                        <li><a href="#api_contextmenu_functions">Functions</a></li>
                      </ul>
                    </li>
                  </ul>
                  <div id="api_classes" class="table-responsive">
                    <a href="#api_ref" class='gotop'>Top</a>
                    <h2>Classes</h2>
                      <table class="table table-striped properties">
                        <tr>
                          <th>Class Name</th>
                          <th>Description</th>
                        </tr>
                        <tr>
                          <td>Tree</td>
                          <td>
                            Describes the whole tree object, as well as the functions related to viewing the tree.
                            <i>Should possibly be split into 2 objects, the Tree and the Viewer</i></td>
                          </td>
                        </tr>
                        <tr>
                          <td>Branch</td>
                          <td>Describes an individual branch in the tree</td>
  <!--                     <td>Loader <i>(deprecated)</i></td>
                        <td>Describes the "loading" animation</td>
                        </tr> -->
                        <tr>
                          <td>Navigator</td>
                          <td>Descibes the optional overview that shows the position
                            of the current view relative to the whole tree. <i>requires work</i></td>
                        </tr>
                    </table>
                  </div>
                  <br>

                  <div id="api_tree" class="table-responsive">
                    <a href="#api_ref" class='gotop'>Top</a>
                    <h2>PhyloCanvas.Tree</h2>
                    <h3>Configuration</h3>
<!--                     <p class="note">To be expanded in v 1.3.0</p>
                    <dl class="dl-horizontal">
                      <dt>history_collapsed - <i>boolean</i></dt>
                        <dd>Is the history initially in the collapsed state</dd>
                    </dl>

 -->
                      <table class="table table-striped properties">
                        <tr>
                            <th>Properties</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                          <td>backColour</td>
                          <td>bool/function (default : <code>false</code>)</td>
                          <td>
                          Possible values:
                            <ul>
                            <li><code>false</code> : the branches are all coloured according to Tree.branchColour</li>
                            <li><code>true</code> : leaves are coloured according to their <code>.colour</code> property. If all of an Internal branches
                              children are of the same colour the branch takes that colour, otherwise it uses <code>Tree.branchColour</code></li>
                            <li><code>{string:rgba} function(branch)</code> : the branch colour is determined by the colour returned by the function.
                              Ideally the returned colour should be an RGBA value</li>
                            </ul>
                          </td>
                        </tr>

                        <tr>
                          <td>baseNodeSize</td>
                          <td>integer</td>
                          <td>The radius of a leaf tip if no other size is specified</td>
                        </tr>

                        <tr>
                          <td>branchColour</td>
                          <td>rgba value</td>
                          <td>The normal colour of the branches</td>
                        </tr>

                        <tr>
                          <td>branchScalar</td>
                          <td>double</td>
                          <td>A multiplier for the branch length to produce the best
                          possible definition between branch lengths <code>(branchLength * branchScalar =
                          drawnLength)</code></td>
                        </tr>

                        <tr>
                          <td>branches</td>
                          <td>object</td>
                          <td>An object containing each branch keyed by it's ID. Internal
                          branches without IDs are given generated Ids prefixed with 'pcn',
                          the root will typically be 'pcn0'</td>
                        </tr>

                        <tr>
                          <td>canvas</td>
                          <td>HTMLCanvasContext</td>
                          <td>The canvas used to draw the tree</td>
                        </tr>

                        <tr>
                          <td>canvasEl</td>
                          <td>HTMLDivElement</td>
                          <td>The element that contains PhyloCanvas. Should normally be a block element. (Slight misnoma for legacy reasons)</td>
                        </tr>

                        <tr>
                          <td>contextMenu</td>
                          <td>PhyloCanvas.ContextMenu</td>
                          <td>A reference to the context menu object that belongs to this instance</td>
                        </tr>

                        <tr>
                          <td>dragging</td>
                          <td>boolean</td>
                          <td>A variable for internal use the records whether
                          the pre-render has run (named for legacy reasons)</td>
                        </tr>

                        <tr>
                          <td>nodeAlign</td>
                          <td>boolean (default: <code>false</code>)</td>
                          <td>To align all the nodes vertically</code></td>
                        </tr>

                        <tr>
                          <td>drawn</td>
                          <td>boolean</td>
                          <td>The font face to use for tree labels</td>
                        </tr>

                        <tr>
                          <td>drawn</td>
                          <td>boolean</td>
                          <td>A variable for internal use the records whether
                            the pre-render has run (named for legacy reasons)</td>
                        </tr>

                        <tr>
                          <td>font</td>
                          <td>string</td>
                          <td>The font face to use for tree labels</td>
                        </tr>

                        <tr>
                          <td>highlightColour</td>
                          <td>rgba value</td>
                          <td>The colour of the highlighted branches</td>
                        </tr>

                        <tr>
                          <td>hightlightWitdh</td>
                          <td>integer (default : 5)</td>
                          <td>How much bigger do highlighted nodes/branches get</td>
                        </tr>

                        <tr>
                          <td>hoverLabel</td>
                          <td>boolean</td>
                          <td>If the labels are turned off, and this is true, show
                            the node label when hovering over the node tip.</td>
                        </tr>

                        <tr>
                          <td>internalNodesSelectable</td>
                          <td>boolean</td>
                          <td><code>true/false</code> to make internal nodes selectable or not.
                          If <code>false</code> then only leaves will be selectable</td>
                        </tr>

                        <tr>
                          <td>lastId</td>
                          <td>integer</td>
                          <td>The last id returned by the id generator</td>
                        </tr>

                        <tr>
                          <td>leaves</td>
                          <td>array - PhyloCanvas.Branch[ ]</td>
                          <td>An array of every node without children, the tips
                            of the tree </td>
                        </tr>

                        <tr>
                          <td>lineWitdh</td>
                          <td>double (default:1.0)</td>
                          <td>The witdh of the lines that make up the branches, as
                          well as the outline of the nodes</td>
                        </tr>

                        <tr>
                          <td>maxBranchLength</td>
                          <td>double, read only</td>
                          <td>The max branchlength from the root of the tree to
                            the furthest tip</td>
                        </tr>

                        <tr>
                          <td>offsetx/offsety</td>
                          <td>integer</td>
                          <td>The the position of the diagram origin (0,0)
                          relative to the centre of the viewer</td>
                        </tr>

                        <tr>
                          <td>origBL</td>
                          <td>object</td>
                          <td>The original branch lengths, populated when a
                            subtree is drawn </td>
                        </tr>

                        <tr>
                          <td>origP</td>
                          <td>object</td>
                          <td>The original parent of the new root, populated when a
                            subtree is drawn </td>
                        </tr>

                        <tr>
                          <td>pickedUp</td>
                          <td>boolean</td>
                          <td>Is the left mouse button being held down over the
                            tree</td>
                        </tr>

                        <tr>
                          <td>rightClickZoom</td>
                          <td>boolean (default : <code>true</code>)</td>
                          <td>Enable zooming the tree by dragging with the right mouse button</td>
                        </tr>

                        <tr>
                          <td>selectedColour</td>
                          <td>rgba value</td>
                          <td>The colour the branch and node change to when selected</td>
                        </tr>

                        <tr>
                          <td>selectedNodeSizeIncrease</td>
                          <td>integer (default : 0)</td>
                          <td>How much bigger do selected nodes get</td>
                        </tr>

                        <tr>
                          <td>showBootstrap</td>
                          <td>boolean (default:<code>false</code>)</td>
                          <td>Whether or not to show all the bootstrap confidence values</td>
                        </tr>

                        <tr>
                          <td>showLabels</td>
                          <td>boolean (default: <code>true</code>)</td>
                          <td>Whether or not to draw all the leaf labels</td>
                        </tr>

                        <tr>
                          <td>textSize</td>
                          <td>integer</td>
                          <td>The size of the branch labels (in px)</td>
                        </tr>

                        <tr>
                          <td>treetype</td>
                          <td>string (default : radial)</td>
                          <td>which branchRenderer to use, supplied renderers are:
                            radial, rectangular, circular, diagonal and hierarchy</td>
                        </tr>

                        <tr>
                          <td>root</td>
                          <td>Branch</td>
                          <td>A reference to the root of the tree</td>
                        </tr>

                        <tr>
                          <td>unselectOnClickAway</td>
                          <td>boolean (default : <code>true</code>)</td>
                          <td>Deselect when the user clicks on somewhere on the canvas
                            that isn't the tree</td>
                        </tr>

                        <tr>
                          <td>selectedNodes</td>
                          <td>array - PhyloCanvas.Branch[ ]</td>
                          <td>An array of the selected branches</td>
                        </tr>

                        <tr>
                          <td>zoom</td>
                          <td>double</td>
                          <td>The current Zoom level</td>
                        </tr>
                      </table>
                    </div>

                    <div id="api_tree_functions" class="table-responsive">
                      <a href="#api_ref" class='gotop'>Top</a>
                      <h3>Tree - Functions</h3>
                      <table class="table table-striped properties">
                        <tr>
                          <th>Function</th>
                          <th>Parameters</th>
                          <th>Description</th>
                        </tr>
                        <tr>
                          <td>AJAX</td>
                          <td>
                            <ul>
                              <li>url</li> <li> method</li> <li> params</li> <li> callback</li> <li> callbackPars</li> <li> scope</li> <li> errorCallback</li>
                            </ul>
                          </td>
                          <td>Make an AJAX call and pass the data returned to the callback. Used in the load method</td>
                        </tr>

                        <tr>
                          <td>addListener</td>
                          <td>
                            <ul>
                              <li>event_name</li><li>listener</li>
                            </ul>
                          </td>
                          <td>attach a listener to an event from the tree</td>
                        </tr>

                        <tr>
                          <td>on</td>
                          <td>
                            <ul>
                              <li>event_name</li><li>listener</li>
                            </ul>
                          </td>
                          <td>attach a listener to an event from the tree</td>
                        </tr>

                        <tr>
                          <td>adjustForPixelRatio</td>
                          <td></td>
                          <td>
                            compensate for Retina display/browser zoom
                          </td>
                        </tr>

                        <tr>
                          <td>branchRenderers</td>
                          <td>
                            <ul>
                              <li>collection</li>
                            </ul>
                          </td>
                          <td>Functions that enable the drawing of different tree structures. Default
                            branchRenderers are radial, rectangular, circular, diagonal, hierarchy </td>
                        </tr>

                        <tr>
                          <td>buildLeaves</td>
                          <td></td>
                          <td>Reconstruct the leaves array in the correct order after
                            a rotation</td>
                        </tr>

                        <tr>
                          <td>clicked</td>
                          <td>
                            <ul>
                              <li>event</li>
                            </ul>
                          </td>
                          <td>
                            Handler for mouse <code>clicked</code> event on the canvas
                          </td>
                        </tr>

                        <tr>
                          <td>dblclicked</td>
                          <td>
                            <ul>
                              <li>event</li>
                            </ul>
                          </td>
                          <td>
                            Handler for mouse <code>double click</code> event on the canvas
                          </td>
                        </tr>

                        <tr>
                          <td>drag</td>
                          <td>
                            <ul>
                              <li>event</li>
                            </ul>
                          </td>
                          <td>
                            Handler for mouse <code>drag</code> event on the canvas
                          </td>
                        </tr>

                        <tr>
                        <td>drop</td>
                          <td>
                            <ul>
                              <li>event</li>
                            </ul>
                          </td>
                          <td>
                            Handler for mouse <code>drop</code> event on the canvas
                          </td>
                        </tr>

                        <tr>
                          <td>pickup</td>
                          <td>
                            <ul>
                              <li>event</li>
                            </ul>
                          </td>
                          <td>
                            Handler for mouse <code>pickup</code> event on the canvas
                          </td>
                        </tr>

                        <tr>
                          <td>scroll</td>
                          <td>
                            <ul>
                              <li>event</li>
                            </ul>
                          </td>
                          <td>
                            Handler for mouse <code>scroll</code> event on the canvas
                          </td>
                        </tr>

                        <tr>
                          <td>displayLabels</td>
                          <td></td>
                          <td>
                            Show the lables on the tree
                          </td>
                        </tr>

                        <tr>
                          <td>draw</td>
                          <td>
                            <ul>
                              <li>forceRedraw</li>
                            </ul>
                          </td>
                          <td>
                            Draw the tree with the settings provided, forceRedraw causes
                            the prerenderer to redraw. forceRedraw = <code>true/false</code>
                          </td>
                        </tr>

                        <tr>
                          <td>exportNwk</td>
                          <td></td>
                          <td>
                            Return the newick string of the currently displayed tree
                          </td>
                        </tr>

                        <tr>
                          <td>findBranch</td>
                          <td>
                            <ul>
                              <li>pattern</li>
                            </ul>
                          </td>
                          <td>
                            Find a branch accodring to the pattern provided. <br> Case insensitive match
                            against the leaf ID
                          </td>
                        </tr>

                        <tr>
                          <td>fitInPanel</td>
                          <td></td>
                          <td>
                            fit the tree within the current canvas panel
                          </td>
                        </tr>

                        <tr>
                          <td>genId</td>
                          <td></td>
                          <td>
                            Generate a node Id prefixed with 'pcn'
                          </td>
                        </tr>

                        <tr>
                          <td>getBounds</td>
                          <td></td>
                          <td>
                            get the overall size of the tree
                          </td>
                        </tr>

                        <tr>
                          <td>getPngUrl</td>
                          <td></td>
                          <td>
                            Get the dataURL for the current view
                          </td>
                        </tr>

                        <tr>
                          <td>hideLabels</td>
                          <td></td>
                          <td>
                            Hide the lables on the tree
                          </td>
                        </tr>

                        <tr>
                          <td>load</td>
                          <td>
                            <ul>
                              <li>filename</li>
                              <li>tree_name</li>
                              <li>format</li>
                            </dl>
                          </td>
                          <td>
                            <p>Parse a newick or nexus format string and draw the tree</p></p>
                            <dl class="dl-horizontal">
                              <dt>filename (String)</dt>
                              <dd>The name of the file you wish to open via AJAX or the NWK or Nexus String</dd>

                              <dt>tree_name (String)</dt>
                              <dd>If using nexus format, the name of the tree to draw. But default Phylocanvas picks the first tree</dd>

                              <dt>format (nexus|newick)</dt>
                              <dd>Override the parsing algorithm for the string provided</dd>
                            </dl>

                          </td>
                        </tr>

                        <tr>
                          <td>loadCompleted</td>
                          <td></td>
                          <td>Fire the event that signals the load is completed</td>
                        </tr>

                        <tr>
                          <td>loadError</td>
                          <td>
                            <ul>
                              <li>message</li>
                            </ul>
                          </td>
                          <td>Fire the event that signals the load has failed</td>
                        </tr>

                        <tr>
                          <td>loadStarted</td>
                          <td></td>
                          <td>Fire the event that signals the load has started</td>
                        </tr>

                        <tr>
                          <td>nodeRenderers</td>
                          <td>
                            <ul>
                              <li>collection</li>
                            </ul>
                          </td>
                          <td> Render the tip of a leaf. Extensible collection that includes <br>
                            <code>circle</code> (default),
                            <code>square</code>,
                            <code>triangle</code>,
                            <code>star</code>.
                            <p>
                              Rotation and offset of
                              the canvas are set so that 0,0 is the tip of the branch.
                            </p>
                          </td>
                        </tr>

                        <tr>
                          <td>nodeSelected(nids)</td>
                          <td></td>
                          <td>Fire the event that signals nodes have been selected</td>
                        </tr>

                        <tr>
                          <td>parseNexus</td>
                          <td>
                            <ul>
                              <li>nexus_string</li>
                              <li>name</li>
                            </ul>
                          </td>
                          <td>Parse a nexus formatted string. If using Nexus
                          the tree name should be specified, normally these methods are
                          invoked from within the load function</td>
                        </tr>

                        <tr>
                          <td>parseNwk</td>
                          <td>
                            <ul>
                              <li>Newick string</li>
                            </ul>
                          </td>
                          <td>Parse a Nexus or nwk formatted string.</td>
                        </tr>

                        <tr>
                          <td>prerenderers</td>
                          <td>
                            <ul>
                              <li>collection</li>
                            </ul>
                          </td>
                          <td>Functions calculate the structure of the tree before drawing. Default
                            pre-renderers are radial, rectangular, circular, diagonal, hierarchy.
                        </tr>

                        <tr>
                          <td>redrawFromBranch</td>
                          <td>
                            <ul>
                              <li>node</li>
                              <li>leafIds</li>
                            </ul>
                          </td>
                          <td>
                            recursively get the IDs of the leaves in a sub-tree, putting the results
                            in leafIds
                          </td>
                        </tr>

                        <tr>
                          <td>redrawFromBranch</td>
                          <td>
                            <ul>
                              <li>node</li>
                            </ul>
                          </td>
                          <td>
                            Redraw a sub-tree from an internal node of a tree.
                          </td>
                        </tr>

                        <tr>
                          <td>redrawOriginalTree</td>
                          <td></td>
                          <td>
                            redraw the tree from it's original root
                          </td>
                        </tr>

                        <tr>
                          <td>resetTree</td>
                          <td></td>
                          <td>
                            Reset the tree ready for the pre-renderers to recalculate
                          </td>
                        </tr>

                        <tr>
                          <td>resizeToContainer</td>
                          <td></td>
                          <td>Fit the whole widget within it's parent div</td>
                        </tr>

                        <tr>
                          <td>rotateBranch</td>
                          <td>
                            <ul>
                              <li>branch</li>
                            </ul>
                          </td>
                          <td>
                            Reverse the order a branch's children are drawn in
                          </td>
                        </tr>

                        <tr>
                        <td>saveNode</td>
                          <td>
                            <ul>
                              <li>node</li>
                            </ul>
                          </td>
                          <td>
                            Atd a node to the tree. Used by the parsers.
                          </td>
                        </tr>

                        <tr>
                        <td>selectNodes</td>
                          <td>
                            <ul>
                              <li>nodeIds</li>
                            </ul>
                          </td>
                          <td>Select the nodes specified by node ids (array or comma seperated list).
                            <b>N.B.</b> all leaves must be adjacent in the tree</td>
                        </tr>

                        <tr>
                        <td>setFont</td>
                          <td>
                            <ul>
                              <li>font</li>
                            </ul>
                          </td>
                          <td>Change the font for the node labels</td>
                        </tr>

                        <tr>
                          <td>setNodeColourAndShape</td>
                          <td>
                            <ul>
                              <li>nodeIds</li>
                              <li>colour</li>
                              <li>shape</li>
                              <li>size</li>
                              <li>waiting</li>
                            </ul>
                          </td>
                          <td>Change the node colour and/or shape, optional arguments must be replaced
                            by null or undefined if subsequent arguments are set. All the parameters are optional except nodeIds.
                            <dl class="dl-horizontal">
                              <dt>nodeIds: (Array/String)</dt>
                              <dd>Array / comma separated string.</dd>
                              <dt>Color</dt>
                              <dd>Color of the node in <b>rgb/hex/colornames</b> format Eg: red, rgb(255,0,0), #adadad </dd>
                              <dt>Shapes</dt>
                              <dd>
                                <ul>
                                  <li>x = star</li>
                                  <li>s = square</li>
                                  <li>o = circle</li>
                                  <li>t = triangle</li>
                                </ul>
                              </dd>
                              <dt>Size</dt>
                              <dd>Size of the node </dd>
                            </dl>
                          </td>
                        </tr>

                        <tr>
                          <td>setNodeSize</td>
                          <td>
                            <ul>
                              <li>size</li>
                            </ul>
                          </td>
                        <td>Set the base size of all the nodes</td>
                        </tr>

                        <tr>
                          <td>setRoot</td>
                          <td>
                            <ul>
                              <li>node</li>
                            </ul>
                          </td>
                          <td>Set the root node of the tree</td>
                        </tr>

                        <tr>
                          <td>setTextSize</td>
                          <td>
                            <ul>
                              <li>size</li>
                            </ul>
                          </td>
                          <td>Set the size of the labels</td>
                        </tr>

                        <tr>
                          <td>setTreeType</td>
                          <td>
                            <ul>
                              <li>type</li>
                            </ul>
                          </td>
                          <td>
                            <p>Hide the lables on the tree</p>
                            <dl class="dl-horizontal">
                              <dt>type (String)</dt>
                              <dd>The name of the type of tree to change to (rectangular, radial, circular, diagonal, hierarchy)
                              </dd>
                            </dl>
                          </td>
                        </tr>

                        <tr>
                          <td>setSize</td>
                          <td>
                            <ul>
                              <li>width</li>
                              <li>height</li>
                            </ul>
                          </td>
                          <td>Set the size of the tree</td>
                        </tr>

                        <tr>
                          <td>setZoom</td>
                          <td>
                            <ul>
                              <li>zoom_level</li>
                            </ul>
                          </td>
                          <td>Set the zoom level of the tree</td>
                        </tr>

                        <tr>
                          <td>toggleLabels</td>
                          <td></td>
                          <td>Toggle the labels on and off</td>
                        </tr>

                        <tr>
                          <td>translateClickX</td>
                          <td>
                            <ul>
                              <li>click_x</li>
                            </ul>
                          </td>
                          <td>Take the X postion of the click from the browser event
                            and turn it into a position relative to the tree</td>
                        </tr>

                        <tr>
                          <td>translateClickY</td>
                          <td>
                            <ul>
                              <li>click_y</li>
                            </ul>
                          </td>
                          <td>Take the Y postion of the click from the browser event
                            and turn it into a position relative to the tree</td>
                        </tr>

                        <tr>
                          <td>treeTypeChanged</td>
                          <td>
                            <ul>
                              <li>old_type</li>
                              <li>new_type</li>
                            </ul>
                          </td>
                          <td>Fire the event that signals the tree type has been changed</td>
                        </tr>

                      </table>
                    </div>


                    <div id="api_events" class="table-responsive">
                      <a href="#api_ref" class='gotop'>Top</a>
                      <h2>Events</h2></a>
                      <p>PhyloCanvas exposes a number of events that allow web pages to change according to activity within PhyoCanvas. The API also exposes a couple of helper methods to enable binding of events to the API.</p>

                      <h3>Helper Methods</h3>
                      <table class="table table-striped properties">
                        <tr>
                          <th>Methods</th>
                          <th>Parameters</th>
                          <th>Description</th>
                        </tr>
                        <tr>
                          <td>Tree.on</td>
                          <td>
                            <ul>
                              <li>event name</li>
                              <li>handler</li>
                            </ul>
                          </td>
                          <td>Add the specified <i>handler</i> to the specified <i>event name</i></td>
                        </tr>

                        <tr>
                          <td>Tree.addListener</td>
                          <td>
                            <ul>
                              <li>event name</li>
                              <li>handler</li>
                            </ul>
                          </td>
                          <td>Add the specified <i>handler</i> to the specified <i>event name</i></td>
                        </tr>
                      </table>
                    </div>
                    <div id="api_events1" class="table-responsive">
                      <a href="#api_ref" class='gotop'>Top</a>
                      <h3>Events</h3>
                      <table class="table table-striped properties">
                        <tr>
                          <th>Events</th>
                          <th>Parameters</th>
                          <th>Description</th>
                        </tr>
                        <tr>
                          <td>loading</td>
                          <td></td>
                          <td>Fires when the widget starts loading a file via AJAX</td>
                        </tr>
                        <tr>
                          <td>loaded</td>
                          <td></td>
                          <td>Fires when a tree has completed loading</td>
                        </tr>
                        <tr>
                          <td>error</td>
                          <td>
                            <ul>
                              <li>node</li>
                            </ul>
                          </td>
                          <td>Fires if an error is encountered by the loading or parsing process
                            <dl class="dl-horizontal">
                              <dt>node</dt>
                                <dd>The id of the node chosen as the new root</dd>
                            </dl>
                          </td>
                        </tr>
                        <tr>
                          <td>subtree</td>
                          <td>
                            <ul>
                              <li>node</li>
                            </ul>
                          </td>
                          <td>Fires when the user draws a subtree
                            <dl class="dl-horizontal">
                              <dt>node</dt>
                                <dd>The id of the node chosen as the new root</dd>
                            </dl>
                          </td>
                        </tr>
                        <tr>
                          <td>typechanged</td>
                          <td>
                            <ul>
                              <li>oldType</li>
                              <li>newType</li>
                            </ul>
                          </td>
                          <td>Fires when the tree type is changed
                            <dl class="dl-horizontal">
                              <dt>oldType</dt>
                                <dd>The name of the type of tree that was being displayed before the type was changed</dd>
                              <dt>newType</dt>
                                <dd>The name of the type of tree that the view was changed to</dd>
                            </dl>
                          </td>
                        </tr>
                        <tr>
                          <td>selected</td>
                          <td>
                            <ul>
                              <li>nodes</li>
                            </ul>
                          </td>
                          <td>Fires when the user selectes node(s)
                            <dl class="dl-horizontal">
                              <dt>nodes</dt>
                                <dd>An Array of the IDs of selected node</dd>
                            </dl>
                          </td>
                        </tr>
                      </table>
                    </div>


                    <div id="api_branch" class="table-responsive">
                      <a href="#api_ref" class='gotop'>Top</a>
                      <h2>PhyloCanvas.Branch</h2>

                      <h3>Properties</h3>
                      <table class="table table-striped properties">
                        <tr>
                          <th>Properties</th>
                          <th>Description</th>
                        </tr>
                        <tr>
                          <td>angle</td>
                          <td>
                            The angle (clockwise from horizontal) of the node branch
                          </td>
                        </tr>
                        <tr>
                          <td>branchLength</td>
                          <td>
                            The relative length of the branch as defined in the nwk/nexus string
                          </td>
                        </tr>
                        <tr>
                          <td>canvas</td>
                          <td>
                            A reference to the canvas on which the branch is drawn
                          </td>
                        </tr>
                        <tr>
                          <td>centrex/centrey</td>
                          <td>
                            The position of the end of the node.
                          </td>
                        </tr>
                        <tr>
                          <td>children</td>
                          <td>
                            The child branches of this branch
                          </td>
                        </tr>
                        <tr>

                          <td>collapsed</td>
                          <td>
                            Has the branch been collapsed
                          </td>
                        </tr>
                        <tr>

                          <td>colour</td>
                          <td>
                            The fill colour of the node tip
                          </td>
                        </tr>
                        <tr>

                          <td>data</td>
                          <td>
                            a custom object that can be used in conjustion with a
                            custom noderenderer
                          </td>

                        </tr>
                        <tr>

                          <td>id</td>
                          <td>
                            The unique identifier for a node, particulary for identifying leaf nodes, this becomes the
                            key to <i>Tree.branches</i>
                          </td>
                        </tr>
                        <tr>

                          <td>interx/intery</td>
                          <td>
                            Used by layouts that align all the nodes at the same distance
                            from the root, but needing to show branch lengths (e.g. circular layout);
                          </td>
                        </tr>
                        <tr>

                          <td>label</td>
                          <td>
                            The label shown next to the node. Blank strings will be displayed, if the label is null (default)
                            or undefined the ID is displayed instead
                          </td>
                        </tr>
                        <tr>

                          <td>leaf</td>
                          <td>
                            True if the branch has no children and is therefore
                            a leaf
                          </td>
                        </tr>
                        <tr>
                          <td>minChildAngle</td>
                          <td>
                            The minimum child angle
                          </td>
                        </tr>

                        <tr>
                          <td>maxChildAngle</td>
                          <td>
                            The maxim child angle
                          </td>
                        </tr>

                        <tr>
                          <td>startx</td>
                          <td>
                            The x position of the start of the branch (the parent nodes centrex/centrey)
                          </td>
                        </tr>
                        <tr>

                        <tr>
                          <td>starty</td>
                          <td>
                            The y position of the start of the branch (the parent nodes centrex/centrey)
                          </td>
                        </tr>

                          <td>totalBranchLength</td>
                          <td>
                            The total distance from the root of the tree to the tip of the branch
                          </td>
                        </tr>
                        <tr>
                          <td>tree</td>
                          <td>
                            A reference to the tree object that this branch belongs too
                          </td>
                        </tr>
                      </table>
                    </div>

                    <div id="api_branch_functions" class="table-responsive">
                      <a href="#api_ref" class='gotop'>Top</a>
                      <h3>Branch - Functions</h3>
                      <table class="table table-striped properties">
                        <tr>
                          <th>Function</th>
                          <th>Parameters</th>
                          <th>Description</th>
                        </tr>
                        <tr>
                          <td>addChild</td>
                          <td>
                            <ul>
                              <li>node</li>
                            </ul>
                          </td>
                          <td>Add a child branch to this branch</td>
                        </tr>
                        <tr>
                          <td>clicked</td>
                          <td>
                            <ul>
                              <li>x</li>
                              <li>y</li>
                            </ul>
                          </td>
                          <td>see if this branch is the one that has been clicked given the x
                          and y coordinates (output from Tree.translateClickX/Y)</td>
                        </tr>
                        <tr>
                          <td>collapse</td>
                          <td></td>
                          <td>Collapse this branch</td>
                        </tr>
                        <tr>
                          <td>drawLabel</td>
                          <td></td>
                          <td>Draw the label for this branch</td>
                        </tr>
                        <tr>
                          <td>drawNode</td>
                          <td></td>
                          <td>draw the coloured tip of this branch</td>
                        </tr>
                        <tr>
                          <td>expand</td>
                          <td></td>
                          <td>Expand (uncollapse) the node</td>
                        </tr>
                        <tr>
                          <td>getColour</td>
                          <td></td>
                          <td>Get the tip or branch colour of this node depeneding on whether its
                          a leaf or an internal node</td>
                        </tr>
                        <tr>
                          <td>getChildColours</td>
                          <td></td>
                          <td>return an array of the colours of this childs children</td>
                        </tr>
                        <tr>
                          <td>getChildCount</td>
                          <td></td>
                          <td>get the <b>total</b> number of children under this node and all
                          of it's children.</td>
                        </tr>
                        <tr>
                          <td>getChildIds</td>
                          <td></td>
                          <td>Return the IDs of all the leaves under this branch (recursively)</td>
                        </tr>
                        <tr>
                          <td>getChildNo</td>
                          <td></td>
                          <td>Get the position of this node in it's parents children
                          array</td>
                        </tr>
                        <tr>
                          <td>getChildYTotal</td>
                          <td></td>
                          <td>Return the total distance on the Y axis occupied by this nodes children</td>
                        </tr>
                        <tr>
                          <td>getLabel</td>
                          <td></td>
                          <td>return the text that labels this node, if no label is
                          set return the node id</td>
                        </tr>
                        <tr>
                          <td>getLabelSize</td>
                          <td></td>
                          <td>Return the width of this node's label</td>
                        </tr>
                        <tr>
                          <td>getNodeSize</td>
                          <td></td>
                          <td>Get the size of the tip of the node</td>
                        </tr>
                        <tr>
                          <td>getNWK</td>
                          <td></td>
                          <td>Return the nwk format string of this node</td>
                        </tr>
                        <tr>
                          <td>getTextColour</td>
                          <td></td>
                          <td>Get the colour of the label</td>
                        </tr>
                        <tr>
                          <td>parseNwk</td>
                          <td>
                            <ul>
                              <li>nwk_string</li>
                              <li>idx</li>
                            </ul>
                          </td>
                          <td>Recursive parsing function for a Newick formatted tree file</td>
                        </tr>
                        <tr>
                          <td>parseLabel</td>
                          <td>
                            <ul>
                              <li>nwk_string</li>
                              <li>idx</li>
                            </ul>
                          </td>
                          <td>Parse a label from a Newick string</td>
                        </tr>
                        <tr>
                          <td>parseNodeLength</td>
                          <td></td>
                          <td>Parse the node length from a nwk string</td>
                        </tr>
                        <tr>
                          <td>redrawTreeFromBranch</td>
                          <td></td>
                          <td>Draw a subtree from this branch</td>
                        </tr>
                        <tr>
                          <td>reset</td>
                          <td></td>
                          <td>set all the branches positional properties back to 0 ready for the
                          next branch layout</td>
                        </tr>
                        <tr>
                          <td>rotate</td>
                          <td></td>
                          <td>Reverse the order of the nodes immediate children. The reverse function is available in the right-click menu</td>
                        </tr>
                        <tr>
                          <td>saveChildren</td>
                          <td></td>
                          <td>save this nodes children to the tree</td>
                        </tr>
                        <tr>
                          <td>setHighlighted</td>
                          <td>
                            <ul>
                              <li><code>true/false</code></li>
                            </ul>
                          </td>
                          <td>Sets whether or not this branch is highlighted</td>
                        </tr>
                        <tr>
                          <td>setSelected</td>
                          <td>
                            <ul>
                              <li>selected</li>
                              <li>applyToChildren</li>
                            </ul>
                          </td>
                          <td>Set whether the node is selected (true or false) and whether
                          this should be applied to all it's children.</td>
                        </tr>
                        <tr>
                          <td>setTotalBranchLength</td>
                          <td></td>
                          <td>calculate the total branch length property for this node</td>
                        </tr>
                        <tr>
                          <td>toggleCollapse</td>
                          <td></td>
                          <td>Toggle this node between collapsed and expanded</td>
                        </tr>
                      </table>
                    </div>


                    <div id="api_history" class="table-responsive">
                      <a href="#api_ref" class='gotop'>Top</a>
                      <h2>PhyloCanvas.History</h2>
                      <p>The history panel of sub-trees</p>

                      <h3>Properties</h3>
                      <table class="table table-striped properties">
                        <tr>
                          <th>Properties</th>
                          <th>Description</th>
                        </tr>
                        <tr>
                          <td>tree</td>
                          <td>reference to the tree object</td>
                        </tr>
                        <tr>
                          <td>div</td>
                          <td>the div containing the history</td>
                        </tr>
                      </table>
                    </div>

                    <div id="api_history_functions" class="table-responsive">
                      <a href="#api_ref" class='gotop'>Top</a>
                      <h3>History - Functions</h3>
                      <table class="table table-striped properties">
                        <tr>
                          <th>Function</th>
                          <th>Parameters</th>
                          <th>Description</th>
                        </tr>
                        <tr>
                          <td>reset</td>
                          <td></td>
                          <td>Clear all the snapshots and then add the root snapshot</td>
                          </tr>
                          <tr>

                          <td>collapse</td>
                          <td></td>
                          <td>Collapse the histroy panel into the left of the PhyloCanvas
                              div</td>
                          </tr>
                          <tr>

                          <td>expand</td>
                          <td></td>
                          <td>Show the History</td>
                          </tr>
                          <tr>

                          <td>isCollapsed</td>
                          <td></td>
                          <td>return true if the history is collapsed and false if it isn't</td>
                          </tr>
                          <tr>

                          <td>toggle</td>
                          <td></td>
                          <td>If the history is collapsed exapand it and vice-versa</td>
                          </tr>
                          <tr>

                          <td>createDiv</td>
                          <td>
                            <ul>
                              <li>parentDiv</li>
                            </ul>
                          </td>
                          <td>Crete the div that will contain the history</td>
                          </tr>
                          <tr>

                          <td>resizeTree</td>
                          <td></td>
                          <td>Adjust the size of the tree to compensate for the History being
                            collapsed or expanded</td>
                          </tr>
                          <tr>

                          <td>addSnapshot</td>
                          <td>
                            <ul>
                              <li>id</li>
                            </ul>
                          </td>
                          <td>Add a snapshot of the current tree view that will redraw the
                              tree from the node with the ID id.</td>
                          </tr>
                          <tr>

                          <td>clear</td>
                          <td></td>
                          <td>Remove all the snapshots</td>
                          </tr>
                          <tr>

                          <td>goBackTo</td>
                          <td>
                            <ul>
                              <li>event</li>
                            </ul>
                          </td>
                          <td>Click handler for the snapshots that removes the subsequent
                            history entries.</td>
                        </tr>
                      </table>
                    </div>


                    <div id="api_contextmenu" class="table-responsive">
                      <a href="#api_ref" class='gotop'>Top</a>
                      <h2>PhyloCanvas.ContextMenu</h2>
                      <h4>Properties</h4>
                      <table class="table table-striped properties">
                        <tr>
                          <th>Properties</th>
                          <th>Description</th>
                        </tr>
                        <tr>
                          <td>elements</td>
                          <td>Menu choices, an array of dictionaries with properties
                            <dl class="dl-horizontal">
                              <dt>text</dt>
                                <dd>The label of the menu item</dd>

                              <dt>handler</dt>
                                <dd>The function in the Tree object that the menu item invokes. If
                                a node has been clicked on it is padded to the handler</dd>

                              <dt>internal</dt>
                                <dd>Does this function apply to an internal node</dd>

                              <dt>leaf</dt>
                                <dd>Does this function apply to a leaf</dd>
                            </dl>
                          </td>
                        </tr>
                      </table>

                      <p>Configuring a context menu at the time of Tree initialization
<pre>
phylocanvas = new PhyloCanvas.Tree('phylocanvas', {
  // other options
  contextMenu : [{
    text: 'Normal Menu',
    handler: 'triggerNormal',
    internal: false,
    leaf: false
  }, {
    text: 'Internal Menu',
    handler: 'triggerInternal',
    internal: true,
    leaf: false
  }, {
    text: 'Save as PNG',
    handler: 'exportCurrentTreeView',
    internal: false,
    leaf: false
  }]
});
</pre>
                      </p>
                    </div>

                    <div id="api_contextmenu_functions" class="table-responsive">
                      <a href="#api_ref" class='gotop'>Top</a>
                      <h3>ContextMenu - Functions</h3>
                      <table class="table table-striped properties">
                        <tr>
                          <th>Properties</th>
                          <th>Parameters</th>
                          <th>Description</th>
                        </tr>
                        <tr>
                          <td>close</td>
                          <td></td>
                          <td>Close the context menu</td>
                        </tr>
                        <tr>
                          <td>mouseover</td>
                          <td></td>
                          <td>Hover function</td>
                        </tr>
                        <tr>
                          <td>mouseout</td>
                          <td></td>
                          <td>Hover functions</td>
                        </tr>
                        <tr>
                          <td>open</td>
                          <td>
                            <ul>
                              <li>x</li>
                              <li>y</li>
                            </ul>
                          </td>
                          <td>Open the menu at position x, y</td>
                        </tr>
                      </table>
                    </div>

                </section>
